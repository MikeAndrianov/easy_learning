<%= javascript_include_tag params[:controller] %>

<div ng-controller="TestCtrl">

  <div class="container">
    <div class="hero-unit"><h2>{{test.name}}</h2></div>
    <div class="container">
      <form name="questionForm" class="form-horizontal" ng-submit="addQuestion()">
        <input type="text" name="questionText" class="input-large " ng-model="formQuestionText" ng-model-instantly placeholder="your new question" required>
        <button class="btn" id="addQuestion" type="submit" value="add" ng-disabled="!questionForm.$valid"><i
          class="glyphicon glyphicon-plus"></i> Add
        </button>
      </form>

    </div>

    <div class="container" ng-repeat="question in test.questions">
      <div class="content">
        <table class="table table-hover">
          <thead>
            <tr>
              <th class="span1">is right</th>
              <th class="span6"><h4>{{question.content}}</h4></th>
              <th class="span2">
                <button ng-click="deleteQuestion(question)" class="btn"><i class="glyphicon glyphicon-remove"></i>
                </button>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="answer in question.answers">
              <td><input type="checkbox" ng-model="answer.is_right" ng-click="triggerIsRight(answer)"></td>
              <td><strong>{{answer.content}}</strong></td>
              <td>
                <button ng-click="deleteAnswer(question,answer)" class="btn"><i class="glyphicon glyphicon-remove"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <form name="answerForm">        
          <input type="text" name="answerText" ng-model="formAnswerText" placeholder="new answer" required>         
          <button class="btn" id="addAnswer" ng-click="addAnswer(question,formAnswerText)"
          ng-disabled="answerForm.answerText.$invalid"><i class="glyphicon glyphicon-plus"></i></button>         
        </form>
      </div>
    </div>
  </div>
</div>

